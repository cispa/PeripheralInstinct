import serial
import io
 
recipient = "+123456789"
message = "Hello, World! (sent from my python script)"
pin = "0000"

signal = serial.Serial(
    port='/dev/ttyACM0',
    baudrate=115200,
    bytesize=8,
    parity='N',
    timeout=1,
    stopbits=1,
    rtscts=False,
    dsrdtr=False
)
 
signal_text = io.TextIOWrapper(signal, newline='\r\n')
 
signal.write("AT\r\n".encode())
print(signal_text.readline()) # empty
print(signal_text.readline()) # OK

signal.write("AT+CMGF=1\r\n".encode())
print(signal_text.readline()) # empty
print(signal_text.readline()) # OK

signal.write(f"AT+CPIN=\"{pin}\"\r\n".encode())
print(signal_text.readline()) # empty
print(signal_text.readline()) # OK

signal.write("AT+CMGS=\"".encode() + recipient.encode() + "\"\r".encode())
signal.write(message.encode() + "\r".encode())
signal.write(chr(26).encode())
print(signal_text.readline()) # empty
print(signal_text.readline()) # OK
